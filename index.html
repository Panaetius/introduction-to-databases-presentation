<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Introduction to Databases</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">

		<style type="text/css">
		    section.title-slide {
				position: absolute;
				top: 50%;
				margin:0;
			}
			.title-slide h2, .title-slide h3 {
				color: white;
			}

			section.content-slide {
				margin: 0;
			}

			section.content-slide h3:first-child {
				color: white;
				margin-top: 20px;
				margin-bottom: 50px;
			}

			.reveal .slides section[data-vertical-align-top]{
				top: 0 !important;
				left: 0 !important;
			}

			.reveal .slides {
				text-align: left !important;
				padding-left: 500px;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-markdown data-separator="---" data-separator-vertical="--" data-background-image="dist/images/title_background.svg" class="title-slide">
					<textarea data-template>
					  ## Introduction to Databases


					  ### Ralf Grubenmann
					</textarea>
				</section>
				<section data-markdown data-separator="---" data-separator-vertical="--" data-background-image="dist/images/slide_background.svg" class="content-slide">
					<textarea data-template>
					  ### What are Databases

					  * Organized, structured collection of data
					  * Fast access to records
					  * Fast queries/projections
					  <p class="fragment fade-out" data-fragment-index="1" style="position:fixed;top:50%;left:50%;"><img src="dist/images/database-illustration.png" width="300" /></p>
					  <p class="fragment fade-in" data-fragment-index="1" style="position:fixed;top:50%;left:50%;"><img src="dist/images/emmentaler2.png" width="300" height="315" /></p>

<br/><br/>

					  #### Use-cases

					  * Help with understanding datasets
					  * Provide easy access to (subsets of) data
					  * Dealing with streams of data
					  * Adding metadata to data

					  ---

					  ### Types of databases

					  * Relational/SQL
						- Use Tables with Ids
						- Fixed Schemas
						- Strict relations
						- Consistency guarantees
					  * NoSQL
					  * Graph

					  <img src="dist/images/relational-database.png"  height="200" width="300" style="position:fixed;top:30%;left:40%;" />
					  <img src="dist/images/nosql-databases.jpg"  height="200" width="300" style="position:fixed;top:65%;left:40%;" />
					  <img src="dist/images/graph-database.png"  height="200" width="300" style="position:fixed;top:100%;left:40%;" />

					  ---

					  ### Relational Databases

					  * store data in tables with predefined schemas and fixed datatypes
					  * have fixed relations between tables
					  * suitable for structured data
					  * ACID guarantees
						- Atomicity
						- Consistency
						- Isolation
						- Durability

						<img src="dist/images/sqlite.png" width="250" style="position:fixed;top:35%;left:40%;" />
						<img src="dist/images/Postgresql_elephant.svg"  width="200" style="position:fixed;top:50%;left:40%;" />
						<img src="dist/images/mariadb.png" width="250" style="position:fixed;top:27%;left:55%;" />
						<img src="dist/images/mssql.jpg" width="250" style="position:fixed;top:50%;left:55%;" />
					  Note:
					  A: Succeed or rollback, C: One valid state to another, I: concurrency, D: permanent, even on system failure
					  --

					  ### Tables

					  * Basic store of data. Simple lists of entries as rows and values in columns
					  * Think pandas DataFrame
					  * Usually have one (or more...) columns as primary key (Unique identifier of a record, int or UUID)
					  * Fast lookup and writes.
					  * Can be filtered, projected etc. (Basically Excel)


					  <img src="dist/images/pgadmin_tables.png" width="600" style="position:fixed;top:35%;left:40%;" />
					  --

					  ### Relationships

					  * Define how table are related to each other
					  * Consist of matching ids in tables
					  * can be 1:1, 1:n or n:n
					  * Can add constraints to restrict what is/isn't allows

					  <p class="fragment fade-out" data-fragment-index="1" style="position:fixed;top:50%;left:50%;"><img src="dist/images/simple_db_diagram.png" width="600" style="position:fixed;top:35%;left:40%;" /></p>
					  <p class="fragment fade-in" data-fragment-index="1" style="position:fixed;top:50%;left:50%;"><img src="dist/images/huge-database-diagram.jpg" width="600" style="position:fixed;top:35%;left:40%;" /></p>
					  --

					  ### Indices

					  * Use for fast querying/lookup on columns
					  * Can make a HUGE difference for performance
					  * Internally uses B-Trees pointing to paged data

					  <img src="dist/images/pg-index.png" width="600" style="position:fixed;top:35%;left:40%;" />
					  --

					  ### SQL (Structured Query Language)

					  * Used for interaction with the database
					  * Mostly the same across SQL DB implementations
					  * Easy to learn but the devil is in the details

					  <pre><code data-line-numbers="1|2|3">  SELECT *
						  FROM users
						  WHERE id=5;
					  </code></pre>

					  <pre><code data-line-numbers="|1|2|3-4|5" data-noescape>  INSERT INTO users (Name, Surname, Email)
						  VALUES
						  ("Frank", "Doe", "john.doe@example.com"),
						  ("Sue", "Doe", "sue.doe@example.com")
						  RETURNING *;
					  </code></pre>

					  <pre><code data-line-numbers="|1|2|3">  UPDATE users
						  SET name="John"
						  WHERE id=5;
					  </code></pre>

					  <pre><code data-line-numbers="|1|2">  DELETE FROM users
						  WHERE id=5;
					  </code></pre>

					  <pre><code data-line-numbers="|1-2|3|4">  SELECT u.Name, u.Email
						  FROM users u
						  INNER JOIN addresses a ON a.user_id = u.id
						  WHERE a.ZipCode = 8001
					  </code></pre>
					</textarea>
				  </section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script src="bower_components/reveal.js-menu/menu.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				progress: true,
				slideNumber: "h.v",
				center: false,
				width: 1920,
				height: 1080,
				minScale: 0.2,
				maxScale: 4.0,
				margin: 0,
				transition: "slide",
				backgroundTransition: "slide",

				menu: {
					themes: true
				},

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMenu ]
			});
		</script>
	</body>
</html>
